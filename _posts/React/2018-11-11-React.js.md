---
layout: post
title: "React.js"
categories: React.js ReactDOM
published: true
---

Notes on React.js.

# #I. Key Concepts
- Early, jQuery was the first JS library that allowed interation (add or remove element) with the DOM across different browsers with common API.

### #1. Don't touch the DOM, I will do it: Declarative vs Imperative.
- DOM is the tree respresentation of the page.
- **Imperative Paradign** DOM is directly manipulated on user generated events using JS.
    - It become difficult to map the user events and DOM use cases.
    - It takes a long time to DOM changes to happen:
        1. Browser has to repaint the DOM.
        1. Browser has to reflow, if the need be.
- In **Declarative approach**, the blueprint of the page is defined once, i.e., 
    - state: object on which the DOM depends. 
    - React takes care of DOM modification whenever the object is modified.

### #2. Building websites like lego blocks: Reusable components.
- Exportable JavaScript functions/class that returns JSX: Presentation Components or Functional Component.

### #3. Unidirectional Data Flow:
- React library takes in the "application state" and "the components", and create a VirtualDOM.
    - A JavaScript object that describes the DOM.
    - This gives react the blueprint of how it should update the actual DOM.
- And everytime on state change, React (Bot) then update the DOM using the VirtualDOM. Thus, unidirectional.
- Data can never move up:
    - The state change of a child component won't effect parent component, only it's own childrens.

### #4. UI, The rest is up to you.
- React is not a framework like AngularJS.
- React only work with the View. A UI library.
- Because it just UI library for View you can use this library everywhere.
    - React DOM
    - React Native
    - React 360
    - Electron & React Desktop
    - React-Blessed

## #Architctering a GREAT React App
- Decide on Components.
- Decide the State and where it lives.
- What changes when state changes.

# #II. React Basics
## #1. Create-React-App
- React is writing in Modern JS that's why Babel and Webpack are configured in create-react-app by default.
- **react-scripts** dev-dependencies:
    - It takes care of babel and webpack config in **create-react** application integrated in scripts of package.json.

## #2. Don't Eject!
- `npm run eject`
    - Gives `scripts` and `config` dir in the root.

## #3. Class Components
- Class Components are prominently used in react because you can create and work with "state" for that Component.

## #4. Component Life Cycle Methods
- These are the methods provided by react that get called automatically when the component is rendered on the DOM.
    - **Mounting:**
        - componentDidMount
            - Make API calls, because we want to the base component first before updating the data.
            - Because your connection may be slow.
    - **Updating:**
        - componentDidUpdate
            - Rerender the element.
            - should not call `setState` in a lifecycle class.
        - shouldComponentUpdate(nextProps, nextState)
            - Determine wheter or not update should update on state or prop change.

            ```jsx
            shouldComponentpdate(nextProps, nextState) {
                console.log('shouldComponentUpdate!', nextProps);
                return nextProps.text !== this.props.text;
            }
            ```
    - **Unmounting:**
        - componentWillUnmount

## #5. Props
- Properties that are passed from parents component to children component.

```jsx
// Parent
<Card name="Shitanshu" />

// Child
export const Card = props => <h1>{props.name}</h1>;
```

- Every `prop` aways !important has a `children` property with it.

```jsx
// "Shtianshu is the children property passed through by these Component."
<Card>
    Shitanshu
</Card>

// Child
export const Card = props => <h1>{props.children}</h1>;
```

- If you need to use `this.props` in the constructor, you need to pass it to the constructor and the `super` call.

## #6. State
- `setState` is an aSync function call.
    - That's why react has given us a callback after set state has finished.
    - `setState` batches work into a single update.
        - React Best Practise: If a setState call you use varibles of state directly:
            - Have a function call instead of passing an object.
            - This is imporatant because in an application where multiple state are being updated, and while React batches the set updates into single update. You get the latest updates previous state and props.

        ```jsx
        this.setState((prevState, prevProps) => ({
            meaningOfLife: prevState.meaningOfLife + 1
        }), () => console.log(this.state.meaningOfLife))
        ```

- Change `state` of parent component from children:
    - Have a callback function passed as a `prop` to handle state change from parent.

## #7. React Event
- React has SyntheticEvent.

```jsx
// Like onChange
<input 
    type="search"
    placeholder='search monster'
    onChange={e => {
        this.setState({ searchField: e.target.value }, () => console.log(this.state));
    }}
    />
```

- Never call a function on Event Handler, always assign.

```jsx
// Wrong
<button onClick={this.handleClick()}>click</button>
// Right
<button onClick={this.handleClick}>click</button>
```

## #8. Class Methods and Arrow Functions
- `this` is a keyword that reference the context in which it is invoked.
- In Class Methods `this` gets bound differently.
    - Lifecycle methods have pre-bound `this` when calling `super()` in constructor.
    - In custome class methods we have to explicitly bind the method with `this` to set the context of `this` in the class constructor. 

    ```jsx
    constructor() {
        super();

        this.state = {};

        this.handleChange = this.handleChange.bind(this);
    }
    ```

### #Lexical Scoping
- Arrow Funtions set the context of `this` from wherever it was defined.
    - `this` is automatically bind wherever arrow function is found in a class by JS.

## #9. Deploying: GitHub Pages with React
- Install:

```
$ yarn add gh-pages
```

- Edit package.json
    - Package manager runs any script with `pre` before running it's actual script.
```json
{
    "bla": "bla",
    "homepage": "https://github-username.github.io/repo-name",
    "bla": "bla",
    "scripts": {
        "bla": "bla",
        "predeploy": "yarn build",
        "deploy": "gh-pages -d build"
    }
}
```

- cmd
```
$ git add .
$ git commit -m "Message"
$ git push origin master
```

## #10. React and React DOM
- With Vanilla JS:

```html
<!--After including the JS for React and React DOM in index.html-->
<script>
    const Person = props => {
        return React.createElement('div', {}, [
            React.createElement('h1', {}, props.name),
            React.createElement('p', {}, props.occupation)
        ]);
    };

    const App = () => {
        // React.createElement('Element', 'Attribute', 'Children');
        return React.createElement('div', {}, [
            React.createElement('h1', {}, 'React is Rendered!'),
            React.createElement(Person, { name: 'Shitanshu', occupation: 'Developer' })
        ]);
    };

    ReactDom.render(React.createElement(App), document.getElementById('root'));
</script>
```

- React Virtual DOM is able to batch multiple DOM updates together (efficiently).

## #11.